# 密码学（Cryptography）学习框架

> **口诀：终局定方向，流程搭骨架，单点打通关，类比挂认知，闭环验真知。**

---

## 1. 终极目标（WHY - 终局锚定）

### 解决的核心问题

密码学解决的是**在不安全的通道上进行安全通信**的问题。

想象一下：你想给朋友传纸条，但中间必须经过一个爱偷看的同学。密码学就是让你们能"当着他的面说悄悄话"的魔法。

具体来说，密码学解决四大安全问题：

| 问题 | 大白话 | 例子 |
|------|--------|------|
| **机密性** | 别人看不懂 | 情书被截获了，但内容是加密的 |
| **完整性** | 内容没被改 | 银行转账100元，不能被改成10000元 |
| **认证性** | 确认是本人 | 确认这封信真的是张三写的 |
| **不可否认** | 赖不掉 | 签了合同就不能说"我没签" |

### 最终交付物

学完密码学，你应该能够：
- 理解 HTTPS 为什么安全
- 知道密码是怎么存储的
- 明白比特币签名的原理
- 能选择合适的加密方案

### 评判标准

- 能向非技术人员解释"为什么HTTPS是安全的"
- 能识别常见的密码学误用
- 能在实际项目中正确使用密码学库

### 🎯 验收任务

**独立完成一次 HTTPS 握手过程的白板讲解，并能解释为什么要用"非对称加密交换密钥 + 对称加密传输数据"的混合方案，以及如果去掉证书会有什么风险。**

---

## 2. 流程全景图（WHAT - 流程串联）

### 密码学知识体系全景图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           密码学全景图                                        │
└─────────────────────────────────────────────────────────────────────────────┘

                    ┌─────────────────┐
                    │   安全通信需求   │
                    │  (我要安全传消息) │
                    └────────┬────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
         ▼                   ▼                   ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│    机密性       │ │    完整性       │ │    认证性       │
│  (别人看不懂)   │ │  (内容没被改)   │ │  (确认是本人)   │
└────────┬────────┘ └────────┬────────┘ └────────┬────────┘
         │                   │                   │
         ▼                   ▼                   ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│    加密算法     │ │    哈希函数     │ │    数字签名     │
└────────┬────────┘ └────────┬────────┘ └────────┬────────┘
         │                   │                   │
    ┌────┴────┐              │              ┌────┴────┐
    │         │              │              │         │
    ▼         ▼              ▼              ▼         ▼
┌───────┐ ┌───────┐    ┌─────────┐    ┌───────┐ ┌───────┐
│对称   │ │非对称 │    │ MD5/SHA │    │ RSA   │ │ ECDSA │
│AES    │ │RSA    │    │ 摘要    │    │ 签名  │ │ 签名  │
└───┬───┘ └───┬───┘    └────┬────┘    └───────┘ └───────┘
    │         │              │
    │         │              │
    └────┬────┘              │
         │                   │
         ▼                   │
┌─────────────────┐          │
│   密钥交换      │          │
│ (DH/ECDH)      │          │
└────────┬────────┘          │
         │                   │
         └─────────┬─────────┘
                   │
                   ▼
         ┌─────────────────┐
         │   数字证书/PKI  │
         │  (身份的证明)   │
         └────────┬────────┘
                  │
                  ▼
         ┌─────────────────┐
         │   TLS/HTTPS     │
         │  (综合应用)     │
         └─────────────────┘
```

### 核心流程：安全通信是怎么建立的？

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    安全通信建立流程（以HTTPS为例）                            │
└─────────────────────────────────────────────────────────────────────────────┘

阶段1: 身份验证
┌──────────┐     ┌──────────┐     ┌──────────┐
│  客户端  │     │  服务器  │     │  CA机构  │
│ (浏览器) │     │ (网站)   │     │ (公证人) │
└────┬─────┘     └────┬─────┘     └────┬─────┘
     │    "你是谁？"  │                │
     │ ─────────────> │                │
     │                │                │
     │  "我是淘宝"    │                │
     │  + 数字证书    │                │
     │ <───────────── │                │
     │                │                │
     │  验证证书 ─────┼────────────────>
     │ (确认证书是CA签发的)            │
     │ <───────────────────────────────┘
     │                │

阶段2: 密钥交换
     │                │
     │  用公钥加密    │
     │  随机密钥种子  │
     │ ─────────────> │
     │                │  用私钥解密
     │                │  得到密钥种子
     │                │
     │ 双方用相同算法 │
     │ 生成会话密钥   │
     │ <───────────── │
     │                │

阶段3: 加密通信
     │                │
     │ ══════════════ │
     │  对称加密通信  │
     │  (AES加密)     │
     │ ══════════════ │
     │                │
```

### 每个阶段的输入→加工→输出

| 阶段 | 输入 | 加工 | 输出 | 用到的技术 |
|------|------|------|------|-----------|
| 身份验证 | 服务器证书 | 验证签名链 | 确认身份真实 | 数字证书、数字签名 |
| 密钥交换 | 公钥 + 随机数 | 非对称加密 | 共享的会话密钥 | RSA/ECDH密钥交换 |
| 加密通信 | 明文 + 会话密钥 | 对称加密 | 密文 | AES加密 |
| 完整性校验 | 消息 | 哈希计算 | 消息摘要 | SHA-256/HMAC |

---

## 3. 核心概念导航

| 概念 | 一句话解释 | 详细教程 |
|------|-----------|----------|
| 对称加密 | 加密解密用同一把钥匙，像家门钥匙 | [查看](tutorials/01-symmetric-encryption.md) |
| 非对称加密 | 公钥加密私钥解，像邮箱（谁都能投，只有你能取） | [查看](tutorials/02-asymmetric-encryption.md) |
| 哈希函数 | 任意数据变成固定长度的"指纹" | [查看](tutorials/03-hash-function.md) |
| 数字签名 | 用私钥签名证明"这是我写的" | [查看](tutorials/04-digital-signature.md) |
| 密钥交换 | 当着别人面商量暗号，别人还听不懂 | [查看](tutorials/05-key-exchange.md) |
| 数字证书与PKI | 网络世界的"身份证"和"派出所" | [查看](tutorials/06-certificate-pki.md) |

---

## 4. 实战案例

[查看单点穿透案例：HTTPS握手全流程](tutorials/case-study.md)

---

## 5. 学习路径建议

```
推荐学习顺序（跟着箭头走）：

对称加密 ──→ 非对称加密 ──→ 哈希函数
    │              │              │
    │              ▼              │
    │         密钥交换 <──────────┘
    │              │
    │              ▼
    └────────→ 数字签名
                   │
                   ▼
              数字证书/PKI
                   │
                   ▼
              实战案例(HTTPS)
```

**为什么是这个顺序？**
1. 对称加密最直观，像传统的密码本
2. 非对称加密解决了密钥分发问题
3. 哈希函数是数字签名的基础
4. 密钥交换结合了前面的知识
5. 数字签名用于身份认证
6. 证书是签名的实际应用
7. HTTPS综合运用所有技术

---

## 6. 学习自检清单

### 费曼检验（能讲清楚）
- [ ] 我能向朋友解释"为什么HTTPS地址栏有个小锁"
- [ ] 我能解释"为什么不能只用对称加密"
- [ ] 我能说清楚"数字签名和加密的区别"
- [ ] 我能回答"证书是干什么用的"

### 迁移检验（能举一反三）
- [ ] 如果让我设计一个安全的聊天软件，我知道需要哪些组件
- [ ] 如果看到一个密码学方案，我能识别它用了哪些技术
- [ ] 如果有人说"用MD5加密密码"，我知道这句话哪里有问题

### 深度检验（能说出为什么）
- [ ] 我知道为什么HTTPS要用"非对称+对称"的混合方案
- [ ] 我知道为什么需要CA机构，自签名证书有什么问题
- [ ] 我知道私钥泄露后会有什么后果

---

## 7. 常见误区提醒

| 误区 | 正确理解 |
|------|----------|
| "加密就是安全" | 加密只解决机密性，不解决完整性和认证 |
| "哈希是加密" | 哈希是单向的，不能"解密" |
| "非对称加密更安全所以只用它" | 非对称加密慢1000倍，实际用混合方案 |
| "HTTPS绝对安全" | HTTPS也挡不住钓鱼网站和证书被盗 |
| "密钥越长越好" | 要考虑性能，够用就行 |

---

## 8. 延伸学习资源

学完基础后，可以进一步了解：
- **区块链密码学**：比特币如何用ECDSA签名
- **零知识证明**：证明我知道密码，但不泄露密码
- **同态加密**：在密文上直接计算
- **后量子密码学**：抵抗量子计算机攻击

---

> 🎯 **记住**：密码学不是用来记公式的，是用来保护信息的。理解"为什么"比记住"是什么"更重要。
