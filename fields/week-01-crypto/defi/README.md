# DeFi（去中心化金融）学习框架

> **口诀：终局定方向，流程搭骨架，单点打通关，类比挂认知，闭环验真知。**

---

## 1. 终极目标

### 解决的问题
**传统金融的三大痛点**：
1. **准入门槛高**：开银行账户要身份证、信用审核；跨国转账要各种证明
2. **中间商吃差价**：银行、券商、交易所层层收费，还可能跑路
3. **不透明**：你的钱在银行里被怎么用，你根本不知道

**DeFi 的答案**：用代码（智能合约）取代银行柜员，用区块链取代银行账本，7×24 小时运转，对所有人开放，规则透明可查。

### 最终交付物
- 能够独立使用 DeFi 协议进行代币兑换、流动性提供、借贷操作
- 理解每一步操作背后的原理和风险
- 能够评估一个 DeFi 项目的基本面

### 评判标准
- 能用大白话给朋友解释清楚 DeFi 的核心概念
- 能在测试网完成一笔完整的 DeFi 操作流程
- 能识别常见的 DeFi 骗局和风险

### 验收任务
**独立完成以下操作，并能解释每一步的原理和风险：**
> 在 Uniswap 上用 ETH 兑换 USDC，然后把这些 USDC 存入 Aave 借贷协议赚取利息，最后能解释为什么 Aave 会给你利息、钱从哪里来。

---

## 2. 流程全景图

### DeFi 世界的「金融乐高」

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           DeFi 生态全景图                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐                                                            │
│  │   你的钱包   │  ← 入口：MetaMask 等，存放你的加密资产                      │
│  └──────┬──────┘                                                            │
│         │                                                                   │
│         ▼                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐            │
│  │                    基础设施层                                │            │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │            │
│  │  │   稳定币    │  │   预言机    │  │   跨链桥    │          │            │
│  │  │ USDT/USDC/ │  │ Chainlink   │  │  连接不同链  │          │            │
│  │  │    DAI     │  │  提供价格   │  │             │          │            │
│  │  └─────────────┘  └─────────────┘  └─────────────┘          │            │
│  └─────────────────────────────────────────────────────────────┘            │
│         │                                                                   │
│         ▼                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐            │
│  │                    核心协议层                                │            │
│  │                                                             │            │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │            │
│  │  │  DEX 交易   │  │  借贷协议   │  │  衍生品     │          │            │
│  │  │ Uniswap    │  │   Aave     │  │   dYdX     │          │            │
│  │  │ Curve      │  │  Compound  │  │   GMX      │          │            │
│  │  │ ↓          │  │  ↓         │  │  ↓         │          │            │
│  │  │ 代币互换   │  │ 存借赚息   │  │ 杠杆交易    │          │            │
│  │  └─────────────┘  └─────────────┘  └─────────────┘          │            │
│  │         │                │                │                 │            │
│  │         └────────────────┼────────────────┘                 │            │
│  │                          ▼                                  │            │
│  │                   ┌─────────────┐                           │            │
│  │                   │  流动性池   │ ← 所有协议的核心引擎       │            │
│  │                   │   LP Pool   │                           │            │
│  │                   └─────────────┘                           │            │
│  └─────────────────────────────────────────────────────────────┘            │
│         │                                                                   │
│         ▼                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐            │
│  │                    收益聚合层                                │            │
│  │  ┌─────────────┐  ┌─────────────┐                           │            │
│  │  │ 收益聚合器  │  │  收益农场   │                           │            │
│  │  │  Yearn     │  │ Yield Farm │                           │            │
│  │  │ 自动复投   │  │  挖矿赚币   │                           │            │
│  │  └─────────────┘  └─────────────┘                           │            │
│  └─────────────────────────────────────────────────────────────┘            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 一笔 DeFi 交易的完整旅程

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  1.准备  │───▶│  2.连接  │───▶│  3.授权  │───▶│  4.交易  │───▶│  5.确认  │
│   资产   │    │   钱包   │    │   合约   │    │   执行   │    │   结果   │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
     │               │               │               │               │
     ▼               ▼               ▼               ▼               ▼
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│ 购买ETH  │    │ MetaMask │    │ Approve  │    │  Swap/   │    │ 查看区块 │
│ 转入钱包 │    │ 连接DApp │    │ 授权额度 │    │ Deposit  │    │ 浏览器   │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
```

### 核心机制：资金流动循环

```
                    ┌─────────────────────┐
                    │     流动性提供者    │
                    │   (你可以是其一)    │
                    └──────────┬──────────┘
                               │
                               │ 存入资产
                               ▼
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│   交易者    │ ──────▶ │  流动性池   │ ◀────── │   借款人    │
│  支付手续费 │         │             │         │  支付利息   │
└─────────────┘         └──────┬──────┘         └─────────────┘
                               │
                               │ 分配收益
                               ▼
                    ┌─────────────────────┐
                    │     流动性提供者    │
                    │     获得回报       │
                    └─────────────────────┘
```

---

## 3. 核心概念导航

| 概念 | 一句话解释 | 重要程度 | 详细教程 |
|------|-----------|---------|----------|
| DEX 与 AMM | 没有老板的自动交易所，代码决定价格 | ⭐⭐⭐⭐⭐ | [查看](tutorials/01-dex-amm.md) |
| 流动性池 | DeFi 的「资金蓄水池」，让交易成为可能 | ⭐⭐⭐⭐⭐ | [查看](tutorials/02-liquidity-pool.md) |
| 借贷协议 | 区块链上的银行，存钱有息、借钱付息 | ⭐⭐⭐⭐⭐ | [查看](tutorials/03-lending.md) |
| 稳定币 | 加密世界的「美元」，锚定法币价值 | ⭐⭐⭐⭐ | [查看](tutorials/04-stablecoin.md) |
| 收益耕作 | 把钱放到各种协议里「种田」赚收益 | ⭐⭐⭐⭐ | [查看](tutorials/05-yield-farming.md) |
| 预言机 | 区块链的「眼睛」，引入链外真实数据 | ⭐⭐⭐⭐ | [查看](tutorials/06-oracle.md) |

---

## 4. 实战案例

[查看单点穿透案例：在 Uniswap 完成一笔兑换](tutorials/case-study.md)

---

## 5. 概念类比速查表

| DeFi 概念 | 传统金融类比 | 关键区别 |
|-----------|-------------|----------|
| 钱包 (Wallet) | 银行账户 | 你自己保管钥匙，丢了没人能帮你 |
| DEX | 股票交易所 | 没有交易员，算法自动撮合 |
| 流动性池 | 做市商的资金池 | 任何人都能当做市商 |
| 借贷协议 | 银行存贷款 | 无需身份审核，超额抵押 |
| 稳定币 | 美元 | 去中心化发行，链上流通 |
| 收益耕作 | 理财产品 | 收益更高，风险也更高 |
| Gas 费 | 银行手续费 | 付给矿工，网络拥堵时暴涨 |
| 智能合约 | 合同 + 自动执行系统 | 代码即法律，不可篡改 |

---

## 6. 学习路径建议

```
第一周：理解基础
├── Day 1-2: 钱包设置、理解 Gas 费
├── Day 3-4: DEX 与 AMM 原理
└── Day 5-7: 在测试网完成第一笔 Swap

第二周：深入协议
├── Day 1-2: 流动性池与无常损失
├── Day 3-4: 借贷协议原理
└── Day 5-7: 在测试网尝试存款和借款

第三周：进阶策略
├── Day 1-2: 收益耕作策略
├── Day 3-4: 风险管理
└── Day 5-7: 综合实战演练
```

---

## 7. 风险警示 ⚠️

**DeFi 不是稳赚不赔的游戏，以下风险必须了解：**

| 风险类型 | 说明 | 应对策略 |
|---------|------|---------|
| 智能合约风险 | 代码有 bug，资金可能被盗 | 只用经过审计的老牌协议 |
| 无常损失 | 做 LP 时币价变动导致亏损 | 理解原理后再提供流动性 |
| 清算风险 | 借款时抵押品价格下跌被强平 | 保持健康的抵押率 |
| 预言机风险 | 价格数据被操纵 | 关注协议使用的预言机 |
| 跑路风险 | 项目方卷款跑路 | 避开新项目、匿名团队 |

---

## 8. 学习自检清单

### 费曼检验
- [ ] 我能向不懂区块链的朋友解释什么是 DeFi 吗？
- [ ] 我能说清楚 Uniswap 的价格是怎么确定的吗？
- [ ] 我能解释为什么借款需要超额抵押吗？

### 迁移检验
- [ ] 如果换一个 DEX（比如 SushiSwap），我能独立完成交易吗？
- [ ] 如果换一个借贷协议（比如 Compound），我能独立完成存借吗？
- [ ] 我能评估一个新的 DeFi 项目是否值得参与吗？

### 深度检验
- [ ] 我能说出 AMM 用的是什么数学公式吗？
- [ ] 我能解释无常损失是怎么产生的吗？
- [ ] 我能说出稳定币维持价格稳定的三种机制吗？

---

## 9. 推荐资源

### 动手实践
- **测试网水龙头**：获取免费测试币
- **Uniswap**：最经典的 DEX
- **Aave**：最大的借贷协议

### 数据分析
- **DeFiLlama**：查看各协议 TVL（锁仓量）
- **Dune Analytics**：链上数据分析

### 安全检查
- **Revoke.cash**：管理代币授权
- **DeBank**：资产追踪与风险检查

---

> 🎯 **记住**：DeFi 的核心精神是「Don't trust, verify」（不要信任，要验证）。
>
> 每一笔交易前，问自己三个问题：
> 1. 这个协议的代码审计过吗？
> 2. 我的资金流向了哪里？
> 3. 最坏的情况是什么？
