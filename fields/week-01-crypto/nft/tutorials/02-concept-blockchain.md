# 区块链 (Blockchain)

## 一句话大白话

**区块链就是一个"人人都能查、没人能改"的公共记账本。**

想象一个村子里，每笔交易不是记在某一家的账本上，而是全村人同时记录，而且用特殊墨水写的，一旦写上去就擦不掉。这就是区块链。

---

## 它解决什么问题

### 核心痛点：信任问题

传统世界里，我们靠"中介"来建立信任：
- 银行：确保转账安全
- 淘宝：确保交易公平
- 公证处：确保合同有效

但中介有问题：
- 可能作恶（银行可以冻结你的账户）
- 可能出错（数据库可能被黑）
- 可能消失（公司可能倒闭）

### 区块链的解决方案

| 传统方式 | 区块链方式 |
|---------|-----------|
| 数据存在中心服务器 | 数据存在全球数千个节点 |
| 管理员可以修改 | 任何人都无法单方面修改 |
| 需要信任中介 | 不需要信任任何人，信任数学 |
| 中介倒闭数据可能丢失 | 只要有节点在，数据就在 |

### 为什么 NFT 需要区块链

如果 NFT 的所有权记录存在某个公司的数据库里：
- 公司可以把你的 NFT 删掉
- 公司倒闭了，NFT 也没了
- 别人可能不认这个记录

存在区块链上：
- 没人能删除你的 NFT
- 全球节点备份，不会丢失
- 任何人都能验证你是所有者

---

## 什么时候用 / 什么时候别用

### ✅ 适合用区块链的场景

- 需要去中心化、抗审查
- 需要公开透明、可验证
- 需要不可篡改的记录
- 涉及多方协作、缺乏信任

### ❌ 不适合用区块链的场景

- 需要高频交易（区块链慢且贵）
- 需要隐私保护（链上数据公开）
- 简单的个人数据存储（普通数据库更便宜）
- 需要修改/删除数据的场景

---

## 它不是什么（常见混淆点）

### ❌ 区块链 ≠ 比特币

比特币是**运行在区块链上的一种应用**。区块链是底层技术，比特币是具体产品。

```
类比：
区块链 ≈ 互联网
比特币 ≈ 电子邮件（互联网上的一个应用）
以太坊 ≈ 网页浏览（互联网上的另一个应用）
```

### ❌ 区块链 ≠ 数据库

| 特性 | 传统数据库 | 区块链 |
|------|-----------|--------|
| 谁能读 | 有权限的人 | 任何人 |
| 谁能写 | 管理员 | 任何人（需付费） |
| 能否修改 | 可以 | 几乎不能 |
| 速度 | 毫秒级 | 秒到分钟级 |
| 成本 | 便宜 | 贵 |

### ❌ 区块链 ≠ 完全匿名

- 交易记录是公开的
- 地址虽然是字符串，但可以被追踪分析
- 一旦地址和身份关联，所有历史交易都暴露

---

## 最小例子

### 一个区块长什么样

```javascript
// 简化版区块结构
{
  blockNumber: 18500000,           // 区块编号
  timestamp: "2024-01-15 10:30:00", // 时间戳
  previousHash: "0xabc123...",     // 上一个区块的"指纹"
  hash: "0xdef456...",             // 本区块的"指纹"
  transactions: [                   // 本区块包含的交易
    {
      from: "0x1111...",
      to: "0x2222...",
      value: "1 ETH",
      data: "..." // 如果是 NFT 转账，这里有额外数据
    },
    // ... 更多交易
  ]
}
```

### 区块是怎么"链"起来的

```
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│  区块 #100  │      │  区块 #101  │      │  区块 #102  │
├─────────────┤      ├─────────────┤      ├─────────────┤
│ prevHash:   │◀─────│ prevHash:   │◀─────│ prevHash:   │
│ 0xaaa...    │      │ 0xbbb...    │      │ 0xccc...    │
├─────────────┤      ├─────────────┤      ├─────────────┤
│ hash:       │      │ hash:       │      │ hash:       │
│ 0xbbb...    │─────▶│ 0xccc...    │─────▶│ 0xddd...    │
├─────────────┤      ├─────────────┤      ├─────────────┤
│ 交易列表... │      │ 交易列表... │      │ 交易列表... │
└─────────────┘      └─────────────┘      └─────────────┘

每个区块的 hash 由区块内容计算得出
如果有人篡改 #101 的内容，hash 会变
→ 导致 #102 的 prevHash 对不上
→ 整条链断裂，篡改被发现
```

### 为什么改不了？

假设有人想篡改区块 #101：
1. 修改 #101 的内容 → #101 的 hash 变了
2. #102 的 prevHash 对不上了 → 需要重新计算 #102
3. #102 变了 → #103 也要重新算
4. ... 后面所有区块都要重新算
5. 同时，其他节点还在正常出新区块
6. 攻击者必须算得比全网加起来还快 → 几乎不可能

---

## 新手最常踩的 3 个坑

### 1. 以为交易是即时的

**坑**：发起交易后刷新页面发现"没变化"

**真相**：区块链交易需要：
- 广播到网络（几秒）
- 被矿工打包进区块（以太坊约 12 秒一个区块）
- 等待确认（通常等 1-3 个区块）

**建议**：发起交易后耐心等待，查看交易哈希的状态

### 2. 以为发错了能撤回

**坑**：转错地址想撤回交易

**真相**：一旦交易被确认，**无法撤回**。这是区块链的特性，不是 bug。

**建议**：
- 小额转账先测试
- 仔细核对地址
- 使用地址簿功能

### 3. 混淆不同的区块链

**坑**：把以太坊的 ETH 发到 BSC 链的地址

**真相**：不同区块链是独立的世界：
- 以太坊 (Ethereum)
- BNB Chain (BSC)
- Polygon
- Solana
- ...

虽然有些地址格式相同，但资产不互通！

**建议**：转账前确认：
- 发送和接收双方在同一条链上
- 地址格式正确

---

## 流程图定位

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  准备阶段  │───▶│  创作阶段  │───▶│  铸造阶段  │───▶│  交易阶段  │───▶│  持有阶段  │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
     │                               │               │
     ▼                               ▼               ▼
 【选择链】                     【写入链】        【链上转账】
 以太坊？                     NFT 数据记录      所有权变更
 Polygon？                    到区块链上        记录到链上
 Solana？
```

区块链是 NFT 的"基础设施"：
- **准备阶段**：选择在哪条链上玩
- **铸造阶段**：NFT 数据写入区块链
- **交易阶段**：所有权变更记录到链上
- **持有阶段**：你的所有权记录永久保存在链上

---

## 自测题

1. **概念理解**：为什么区块链被称为"不可篡改"？用自己的话解释。

2. **场景判断**：以下哪个场景最适合用区块链？
   - A. 公司内部考勤记录
   - B. 跨国多方参与的供应链溯源
   - C. 个人日记存储
   - D. 实时股票交易系统

3. **常识判断**：你在以太坊上有一个 NFT，朋友说他在 Polygon 上创建了同样地址，你能把 NFT 直接发给他吗？

<details>
<summary>参考答案</summary>

1. 因为每个区块都包含上一个区块的 hash（指纹），如果篡改一个区块，它的 hash 会变，导致后面所有区块的链接都断裂。要篡改成功，必须重新计算后面所有区块，还要比全网其他人算得快，这在计算上几乎不可能。

2. 答案是 B。跨国多方参与、缺乏统一信任方、需要透明可追溯——这正是区块链的强项。A 和 C 用普通数据库更合适；D 需要毫秒级速度，区块链太慢。

3. 不能直接发。以太坊和 Polygon 是两条不同的区块链，虽然地址格式相同，但资产不互通。你需要通过"跨链桥"把 NFT 从以太坊桥接到 Polygon，或者朋友在以太坊上也有钱包来接收。

</details>
