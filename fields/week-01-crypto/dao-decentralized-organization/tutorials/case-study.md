# 实战案例：从零参与 Uniswap DAO 治理

## 案例背景

本案例将带你完整走一遍 DAO 参与流程，以 Uniswap DAO 为例，从获取投票权到参与投票，让你真正理解 DAO 是如何运作的。

**为什么选择 Uniswap？**
- 最大的 DEX（去中心化交易所）
- 治理流程成熟、文档完善
- 代币容易获取
- 提案活跃度高

**学习目标**：完成以下任务后，你将能够：
- 独立参与任何 DAO 的治理
- 理解提案从创建到执行的全过程
- 评估提案的优劣
- 向他人解释「为什么你的一票是安全且有效的」

---

## 流程演练

### 节点 1：准备工作

#### 输入
- 一个以太坊钱包（MetaMask）
- 一些 ETH（用于 gas 费）
- 学习意愿

#### 加工

**步骤 1：安装 MetaMask**
```
1. 访问 https://metamask.io/
2. 下载并安装浏览器扩展
3. 创建新钱包或导入已有钱包
4. 安全保管助记词！
```

**步骤 2：获取 ETH**
```
方法 A：通过中心化交易所
1. 在 Binance/OKX/Coinbase 购买 ETH
2. 提现到你的 MetaMask 地址
3. 建议至少 0.05 ETH（约 100-150 美元）

方法 B：如果已有其他链资产
1. 使用跨链桥（如 Across, Stargate）
2. 将资产跨到以太坊主网
```

**步骤 3：获取 UNI 代币**
```
方法 A：在 Uniswap 购买
1. 访问 https://app.uniswap.org/
2. 连接 MetaMask
3. ETH → UNI 兑换
4. 建议先买 10-50 UNI（用于学习）

方法 B：检查是否有未领取的空投
1. 如果你在 2020 年 9 月前用过 Uniswap
2. 可能有 400 UNI 空投待领取
3. 访问 https://app.uniswap.org/#/vote 检查
```

#### 输出
- 持有 UNI 代币的钱包
- 有足够 ETH 支付 gas

#### 常见失败原因
1. **ETH 不够支付 gas**：确保有至少 0.01 ETH
2. **使用了错误网络**：必须是以太坊主网，不是 L2
3. **助记词泄露**：永远不要在任何网站输入助记词

---

### 节点 2：激活投票权

#### 输入
- UNI 代币余额
- MetaMask 钱包

#### 加工

**为什么需要激活？**
```
UNI 代币默认不具有投票权
你需要「委托」来激活投票权
可以委托给自己，也可以委托给代表
```

**步骤 1：访问治理页面**
```
1. 打开 https://app.uniswap.org/vote
2. 点击右上角「Connect Wallet」
3. 选择 MetaMask 并授权
```

**步骤 2：委托投票权**
```
选项 A：委托给自己（推荐新手）
1. 点击「Delegate」
2. 选择「Self Delegate」
3. 确认交易（需要支付 gas）
4. 等待交易确认

选项 B：委托给代表
1. 点击「Delegate」
2. 选择一个社区代表（Delegate）
3. 或输入代表的地址
4. 确认交易

如何选择代表？
• 查看代表的投票历史
• 阅读他们的治理理念
• 确认他们是否活跃
• 知名代表如 Blockchain Capital, a16z, 等
```

**步骤 3：验证投票权**
```javascript
// 可选：使用代码验证
// 在浏览器控制台运行

const provider = new ethers.providers.Web3Provider(window.ethereum);
const uniContract = new ethers.Contract(
    "0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984", // UNI 地址
    ["function getVotes(address) view returns (uint256)"],
    provider
);

const myAddress = await provider.getSigner().getAddress();
const votes = await uniContract.getVotes(myAddress);
console.log(`我的投票权: ${ethers.utils.formatEther(votes)} UNI`);
```

#### 输出
- 已激活的投票权（显示在 Uniswap 治理页面）
- 交易哈希（证明你完成了委托）

#### 常见失败原因
1. **委托后投票权仍为 0**：交易可能还未确认，等几分钟
2. **gas 费太贵**：可以等 gas 价格低的时候操作（周末通常便宜）
3. **委托给别人后反悔**：随时可以重新委托给自己

---

### 节点 3：了解治理流程

#### 输入
- 对 Uniswap 治理的好奇心

#### 加工

**Uniswap 治理流程图**
```
┌─────────────────────────────────────────────────────────────────────────┐
│                     Uniswap 治理流程                                    │
└─────────────────────────────────────────────────────────────────────────┘

第一阶段：温度检查 (Temperature Check)
├── 平台：Snapshot（链下，免 gas）
├── 时间：约 5 天
├── 门槛：需要 2.5M UNI 参与
├── 通过条件：50% 以上支持
└── 目的：测试社区对想法的初步反应

              │
              ▼

第二阶段：共识检查 (Consensus Check)
├── 平台：Snapshot（链下，免 gas）
├── 时间：约 5 天
├── 门槛：需要 50K UNI 发起
├── 通过条件：50% 以上支持
└── 目的：进一步讨论和完善提案

              │
              ▼

第三阶段：正式治理 (Governance Proposal)
├── 平台：链上（需要 gas）
├── 提案门槛：2.5M UNI 委托给你
├── 投票期：约 7 天
├── 通过条件：40M UNI 赞成 + 多数支持
└── 执行：2 天时间锁后自动执行


关键数字：

提案门槛：    250 万 UNI  (0.25% 总量)
法定人数：    4000 万 UNI  (4% 总量)
投票期：      约 7 天
时间锁：      约 2 天
```

**在哪里跟踪提案？**
```
官方渠道：
├── 治理论坛：https://gov.uniswap.org/
├── 投票页面：https://app.uniswap.org/vote
└── Snapshot：https://snapshot.org/#/uniswap

第三方工具：
├── Tally：https://www.tally.xyz/gov/uniswap
├── Boardroom：https://boardroom.io/uniswap
└── Twitter @UniswapGov
```

#### 输出
- 理解 Uniswap 的三阶段治理流程
- 知道在哪里获取提案信息

#### 常见失败原因
1. **只关注链上投票**：很多重要讨论发生在论坛和 Snapshot
2. **忽视时间线**：错过投票期就没法参与
3. **信息来源混乱**：建议关注官方渠道

---

### 节点 4：参与投票

#### 输入
- 已激活的投票权
- 一个正在进行的提案

#### 加工

**步骤 1：找到活跃提案**
```
1. 访问 https://app.uniswap.org/vote
2. 查看「Active Proposals」部分
3. 或访问 https://www.tally.xyz/gov/uniswap
```

**步骤 2：研究提案**
```
阅读清单：
□ 提案标题和摘要
□ 提案者是谁？背景如何？
□ 具体要做什么？
□ 需要多少资金？
□ 预期效果是什么？
□ 有什么风险？
□ 社区讨论怎么说？（论坛帖子）
□ 重要人物怎么投的？（其他代表）

评估框架：
┌─────────────────────────────────────────────────────┐
│  问题                        │ 好提案    │ 坏提案   │
├─────────────────────────────────────────────────────┤
│  目标明确吗？                │ ✓ 清晰    │ ✗ 模糊   │
│  有可衡量的成果吗？          │ ✓ 具体    │ ✗ 含糊   │
│  预算合理吗？                │ ✓ 详细    │ ✗ 笼统   │
│  团队有能力执行吗？          │ ✓ 有记录  │ ✗ 未知   │
│  社区反馈如何？              │ ✓ 正面    │ ✗ 争议   │
│  与 Uniswap 使命一致吗？     │ ✓ 一致    │ ✗ 偏离   │
└─────────────────────────────────────────────────────┘
```

**步骤 3：投票**

**链下投票（Snapshot）**
```
1. 访问 https://snapshot.org/#/uniswap
2. 找到目标提案
3. 点击进入提案详情
4. 选择你的立场（For/Against/Abstain）
5. 用钱包签名（免 gas，只需签名）
6. 完成！
```

**链上投票（正式提案）**
```
1. 访问 https://app.uniswap.org/vote
2. 找到「Active」状态的提案
3. 点击提案进入详情
4. 点击「Vote」
5. 选择立场（For/Against）
6. 确认交易（需要支付 gas）
7. 等待交易确认
8. 完成！
```

**步骤 4：可选 - 添加投票理由**
```javascript
// 带理由的投票（链上）
// 理由会永久记录在区块链上

// 在 Etherscan 上与合约交互
// 或使用 Tally 的「Vote with reason」功能

const reason = "支持这个提案是因为它能提高协议安全性，且预算合理";
await governorContract.castVoteWithReason(proposalId, 1, reason);
```

#### 输出
- 成功投票的交易哈希
- 在提案页面能看到你的投票记录

#### 常见失败原因
1. **投票期已结束**：注意提案的截止时间
2. **快照时没有代币**：投票权是在提案创建时快照的
3. **忘记委托**：即使有代币，不委托就没有投票权
4. **链上投票 gas 不够**：准备足够 ETH

---

### 节点 5：跟踪执行

#### 输入
- 已投票的提案
- 对结果的关注

#### 加工

**步骤 1：查看投票结果**
```
投票结束后，提案状态会变成：

• Succeeded（通过）：赞成票 > 40M 且多数支持
• Defeated（否决）：未达到法定人数或反对多数
• Canceled（取消）：提案者撤回
```

**步骤 2：如果提案通过**
```
通过后的流程：

1. 进入排队状态（Queued）
   └── 进入时间锁（约 2 天）

2. 时间锁倒计时
   └── 期间可以被取消（紧急情况）

3. 可执行（Executable）
   └── 任何人都可以触发执行

4. 已执行（Executed）
   └── 提案内容生效
```

**步骤 3：验证执行结果**
```
如何确认提案真的执行了？

1. 查看提案状态
   └── 应显示「Executed」

2. 检查链上交易
   └── 在 Etherscan 上查看执行交易

3. 验证效果
   └── 如果是参数修改，检查合约状态
   └── 如果是转账，检查目标地址余额
```

#### 输出
- 知道提案最终结果
- 能验证执行是否正确

#### 常见失败原因
1. **以为通过就结束了**：还有时间锁和执行步骤
2. **不知道如何验证**：学会在 Etherscan 上查看交易
3. **错过执行**：有时需要有人主动触发执行

---

## 完整流程回顾

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     你的 DAO 参与之旅                                   │
└─────────────────────────────────────────────────────────────────────────┘

准备工作 ──────────────────────────────────────────────────────────────────
│
├── 安装 MetaMask
├── 获取 ETH（gas 费）
├── 购买 UNI 代币
│
▼
激活投票权 ────────────────────────────────────────────────────────────────
│
├── 访问 Uniswap 治理页面
├── 委托给自己或代表
├── 确认投票权已激活
│
▼
研究提案 ──────────────────────────────────────────────────────────────────
│
├── 浏览论坛和 Snapshot
├── 阅读提案详情
├── 查看社区讨论
├── 评估提案优劣
│
▼
参与投票 ──────────────────────────────────────────────────────────────────
│
├── Snapshot 投票（温度检查、共识检查）
├── 链上投票（正式提案）
├── 可选：添加投票理由
│
▼
跟踪结果 ──────────────────────────────────────────────────────────────────
│
├── 查看投票结果
├── 跟踪时间锁状态
├── 验证执行结果
│
▼
恭喜！你已完成完整的 DAO 参与周期！ ✓
```

---

## 常见坑点提醒

### 1. 代币 vs 投票权的混淆
```
你可能遇到这个情况：
「我有 100 UNI，为什么显示投票权是 0？」

原因：
• UNI 代币默认没有投票权
• 必须先「委托」才能激活
• 即使委托给自己也需要这一步

解决：
• 去 Uniswap 治理页面点击「Delegate」
• 选择「Self Delegate」
• 交易确认后投票权就激活了
```

### 2. 快照时机的重要性
```
场景：
提案创建时间：周一
你购买代币时间：周三
投票时间：周五

结果：
你无法投票！因为快照是在周一，那时你还没有代币。

教训：
• 投票权是在提案创建时快照的
• 后来买的代币对该提案无效
• 想参与治理，需要提前持有代币
```

### 3. gas 费的波动
```
以太坊主网 gas 费变化很大：
• 高峰期：50-200 gwei
• 低谷期：10-30 gwei
• 极端时期：500+ gwei

省钱技巧：
• 使用 https://etherscan.io/gastracker 监控 gas
• 周末通常比工作日便宜
• 美国夜间（亚洲下午）通常便宜
• Snapshot 投票不需要 gas（链下签名）
```

### 4. 不要被「紧急」骗了
```
警惕信号：
「紧急！这个提案只剩 1 小时投票期，快投！」

正确做法：
• 真正重要的提案会有充足讨论时间
• 不因紧急而放松审查
• 不确定就选择弃权
• 宁可错过也不要盲投
```

---

## 复盘

### 我学到的 3 件事

1. **DAO 治理是真实有效的**
   - 提案通过后真的会执行
   - 每一票都被记录在区块链上
   - 没有人能篡改投票结果

2. **参与门槛没有想象中高**
   - 不需要大量代币
   - Snapshot 投票完全免费
   - 即使代币少，声音也能被听到（通过论坛讨论）

3. **信息透明是 DAO 的核心优势**
   - 所有提案公开可见
   - 所有投票记录可查
   - 资金流向透明

### 仍不确定的 3 件事

1. **鲸鱼控制问题**
   - 大持有者是否会操控投票？
   - 如何确保小持有者的声音被听到？
   - 委托机制能否真正解决这个问题？

2. **投票参与率低**
   - 为什么大多数代币持有者不投票？
   - 低参与率会带来什么风险？
   - 如何激励更多人参与？

3. **跨 DAO 治理**
   - 一个人参与多个 DAO 时如何管理？
   - 不同 DAO 的治理标准是否应该统一？
   - 未来会有「职业 DAO 代表」吗？

### 下一步要探索的 3 个方向

1. **尝试其他 DAO**
   - Aave：借贷协议治理
   - ENS：域名服务治理
   - Gitcoin：公共产品资助

2. **深入理解治理攻击**
   - 闪电贷攻击案例
   - 贿选攻击
   - 治理最小化趋势

3. **探索 DAO 工具生态**
   - Tally：治理聚合
   - Snapshot：链下投票
   - Safe：多签管理
   - Coordinape：贡献者激励

---

## 实战练习清单

完成以下任务，验证你真正理解了 DAO：

### 基础任务（必做）
- [ ] 获取至少 1 UNI（或任何治理代币）
- [ ] 完成投票权委托
- [ ] 参与至少 1 次 Snapshot 投票
- [ ] 在治理论坛发表至少 1 条评论

### 进阶任务（选做）
- [ ] 参与至少 1 次链上投票
- [ ] 研究并写一篇提案分析（发在论坛或个人博客）
- [ ] 尝试成为某人的委托代表
- [ ] 在 Twitter 上分享你的投票及理由

### 高级任务（挑战）
- [ ] 起草一份提案（可以不提交）
- [ ] 参与 DAO 工作组或贡献者计划
- [ ] 对比分析 3 个不同 DAO 的治理机制
- [ ] 设计一个改进 DAO 治理的方案

---

## 常用资源链接

### Uniswap 相关
- 治理论坛：https://gov.uniswap.org/
- 投票页面：https://app.uniswap.org/vote
- Snapshot：https://snapshot.org/#/uniswap
- 文档：https://docs.uniswap.org/

### 通用工具
- Tally（治理聚合）：https://www.tally.xyz/
- Boardroom（治理仪表盘）：https://boardroom.io/
- DeepDAO（DAO 数据）：https://deepdao.io/
- Safe（多签）：https://app.safe.global/

### 学习资源
- a16z DAO 指南：https://a16z.com/dao-governance/
- Ethereum.org DAO 介绍：https://ethereum.org/en/dao/
- Mirror DAO 专栏：各种深度文章

---

> **最后提醒**：参与 DAO 治理的本质是「用脚投票」——你的代币代表了你的信任和期望。投票前请认真研究，为自己的选择负责。祝你在 Web3 治理之旅中收获知识和乐趣！
