# 从零完成一笔以太坊交易 - 单点穿透演练

> 通过完成一笔完整的链上交易，打通 Web3 的整条学习线路

---

## 案例背景

**目标**：在以太坊测试网（Sepolia）上，从零开始完成以下操作：
1. 创建钱包
2. 获取测试 ETH
3. 发送一笔转账
4. 在区块浏览器上查看交易

**为什么选这个案例**：
- 涵盖了 Web3 最基础的完整流程
- 使用测试网，没有真金白银风险
- 所有概念都能在这个过程中体验到

---

## 流程演练

### 节点 1：创建钱包（身份创建）

#### 操作步骤

1. **下载 MetaMask**
   - 访问 https://metamask.io
   - 安装浏览器插件（推荐 Chrome/Firefox）

2. **创建新钱包**
   ```
   点击「创建钱包」
   → 设置密码（这是本地密码，不是私钥）
   → 备份助记词（12 个单词）
   → 确认助记词
   ```

3. **记录你的信息**
   ```
   助记词: _____________ (绝对不要告诉任何人！)
   钱包地址: 0x________________ (可以公开)
   ```

#### 检查点

- **输入**：无（或导入已有助记词）
- **加工**：MetaMask 生成随机助记词 → 派生私钥 → 计算公钥 → 生成地址
- **输出**：
  - 助记词（12 个单词）
  - 钱包地址（0x 开头的 42 字符）
  - 可以登录 MetaMask

#### 常见失败原因

1. **助记词没有正确备份**
   - 症状：以后无法恢复钱包
   - 预防：写在纸上，不要截图

2. **混淆密码和助记词**
   - 密码：只是打开这个设备上的 MetaMask
   - 助记词：是真正的钱包「钥匙」，可以在任何设备恢复

3. **安装了假的 MetaMask**
   - 只从官网下载
   - 检查插件 ID 和评价数

---

### 节点 2：切换到测试网

#### 操作步骤

1. **显示测试网络**
   ```
   MetaMask → 设置 → 高级 → 显示测试网络 → 开启
   ```

2. **切换网络**
   ```
   点击左上角网络名称 → 选择「Sepolia 测试网络」
   ```

3. **确认切换成功**
   ```
   网络名称显示: Sepolia
   你的余额显示: 0 SepoliaETH
   ```

#### 检查点

- **输入**：钱包已创建，在主网
- **加工**：切换 RPC 端点到 Sepolia 网络
- **输出**：
  - 网络显示为 Sepolia
  - 余额为 0（因为还没有测试币）

#### 常见失败原因

1. **找不到测试网选项**
   - 需要先在设置中启用显示测试网络

2. **不知道自己在哪个网络**
   - 养成习惯：操作前先看左上角网络名称
   - 主网 = 真金白银，测试网 = 练习

3. **混淆主网和测试网资产**
   - 同一个地址在不同网络的资产完全隔离
   - 测试网的币没有价值

---

### 节点 3：获取测试 ETH（水龙头）

#### 操作步骤

1. **访问水龙头网站**
   - https://sepoliafaucet.com （需要 Alchemy 账号）
   - 或 https://sepolia-faucet.pk910.de （PoW 挖矿方式）

2. **领取测试币**
   ```
   粘贴你的钱包地址 → 完成验证 → 点击领取
   ```

3. **等待到账**
   ```
   通常 1-5 分钟
   刷新 MetaMask 查看余额
   ```

#### 检查点

- **输入**：钱包地址
- **加工**：水龙头合约发送测试 ETH 到你的地址
- **输出**：
  - MetaMask 余额显示 > 0 SepoliaETH
  - 可以在区块浏览器查到这笔「入账」

#### 常见失败原因

1. **水龙头请求失败**
   - 可能需要验证（Google reCAPTCHA）
   - 同一地址有领取间隔限制（如 24 小时一次）
   - 换一个水龙头试试

2. **长时间没到账**
   - 检查网络是否正确（Sepolia）
   - 在区块浏览器搜索你的地址看是否有 pending 交易

3. **地址粘贴错误**
   - 仔细检查地址完整性
   - 0x 开头，共 42 个字符

---

### 节点 4：发送一笔转账

#### 操作步骤

1. **准备接收地址**
   ```
   可以用另一个自己的地址，或者随便一个有效地址
   示例: 0x0000000000000000000000000000000000000001
   ```

2. **发起转账**
   ```
   MetaMask → 发送 → 输入接收地址 → 输入金额（如 0.001 ETH）
   ```

3. **查看 Gas 设置**
   ```
   注意看:
   - Gas Limit: 21,000 (简单转账的固定值)
   - 预估费用: X SepoliaETH
   ```

4. **确认交易**
   ```
   点击「确认」→ 等待交易被处理
   ```

#### 检查点

- **输入**：
  - 发送方地址（你的钱包）
  - 接收方地址
  - 转账金额
  - Gas 参数

- **加工**：
  - MetaMask 构造交易数据
  - 用你的私钥签名
  - 广播到 Sepolia 网络
  - 验证者打包进区块

- **输出**：
  - 交易哈希（Transaction Hash）
  - MetaMask 显示「交易已确认」
  - 余额减少（转账金额 + Gas 费）

#### 常见失败原因

1. **余额不足**
   - 需要覆盖：转账金额 + Gas 费
   - Gas 费虽小但必须有

2. **Gas Price 设太低**
   - 测试网通常不拥堵，默认值就行
   - 如果卡住，可以「加速」交易

3. **地址格式错误**
   - 以太坊地址必须是 0x + 40 个十六进制字符
   - 检查有没有多余空格

---

### 节点 5：在区块浏览器验证

#### 操作步骤

1. **获取交易哈希**
   ```
   MetaMask → 活动 → 点击刚才的交易 → 复制交易哈希
   或者点击「在区块浏览器中查看」
   ```

2. **访问 Sepolia Etherscan**
   ```
   https://sepolia.etherscan.io
   ```

3. **搜索交易**
   ```
   粘贴交易哈希 → 查看交易详情
   ```

4. **理解交易详情**
   ```
   Transaction Hash: 0x...         # 交易唯一标识
   Status: Success                 # 成功/失败
   Block: 1234567                  # 被打包进哪个区块
   From: 0x你的地址                # 发送方
   To: 0x接收地址                  # 接收方
   Value: 0.001 ETH               # 转账金额
   Transaction Fee: 0.000xxx ETH  # 实际 Gas 费用
   Gas Price: xx Gwei             # Gas 单价
   Gas Limit & Usage: 21000 | 21000 (100%)  # Gas 使用情况
   ```

#### 检查点

- **输入**：交易哈希
- **加工**：区块浏览器查询区块链数据
- **输出**：
  - 交易状态（Success）
  - 完整的交易详情
  - 可以追踪资金流向

#### 常见失败原因

1. **找不到交易**
   - 确认使用正确的区块浏览器（Sepolia vs 主网）
   - 交易可能还在 Pending

2. **交易显示 Failed**
   - 查看失败原因（通常是 Gas 不足或合约执行错误）
   - 简单转账很少失败

3. **看不懂交易信息**
   - 这很正常，慢慢熟悉每个字段的含义
   - 最重要的是 Status 和 Value

---

## 完整流程回顾

```
┌─────────────────────────────────────────────────────────────────────┐
│                     你刚才完成的完整流程                             │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐         │
│  │ 创建    │───▶│ 切换到  │───▶│ 获取    │───▶│ 发送    │         │
│  │ 钱包    │    │ 测试网  │    │ 测试币  │    │ 转账    │         │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘         │
│       │              │              │              │               │
│       ▼              ▼              ▼              ▼               │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐         │
│  │ 私钥    │    │ 连接    │    │ 余额    │    │ 交易    │         │
│  │ 公钥    │    │ Sepolia │    │ 增加    │    │ 哈希    │         │
│  │ 地址    │    │ 网络    │    │         │    │         │         │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘         │
│                                                      │             │
│                                                      ▼             │
│                                                ┌─────────┐         │
│                                                │ 区块    │         │
│                                                │ 浏览器  │         │
│                                                │ 验证    │         │
│                                                └─────────┘         │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 常见坑点提醒

### 1. 助记词安全

```
❌ 错误做法:
- 截图保存助记词
- 保存到云盘/微信/备忘录
- 让任何人看到你的助记词

✅ 正确做法:
- 写在纸上
- 存放在安全的物理位置
- 考虑金属备份（防火防水）
```

### 2. 网络确认

```
每次操作前检查:
┌─────────────────────────────────────────┐
│  MetaMask 左上角显示什么网络？          │
│                                         │
│  Ethereum Mainnet = 真金白银，小心操作  │
│  Sepolia = 测试网，可以随便玩           │
└─────────────────────────────────────────┘
```

### 3. Gas 理解

```
简单转账 Gas 消耗:
- Gas Limit: 21,000 (固定值)
- Gas Price: 取决于网络拥堵
- 实际费用 = Gas Used × Gas Price

测试网 Gas 几乎免费，主网可能很贵！
```

---

## 复盘

### 我学到的 3 件事

1. **钱包不存币，存私钥**
   - 币在区块链上，钱包只是让你能访问和控制它
   - 私钥是唯一的证明，丢了就永远丢了

2. **每笔交易都有成本**
   - Gas 费是「使用网络的费用」
   - 即使交易失败也要付费（因为计算已经消耗）

3. **区块链是公开透明的**
   - 任何人都能在区块浏览器查看任何交易
   - 「假名」不等于「匿名」

### 仍不确定的 3 件事

1. **签名到底是怎么工作的？**
   - 下一步：深入学习 ECDSA 椭圆曲线签名

2. **智能合约交易和简单转账有什么不同？**
   - 下一步：尝试与一个简单合约交互

3. **主网的 Gas 费波动规律？**
   - 下一步：观察 Etherscan Gas Tracker 一周

### 下一步要做的 3 件事

1. **在测试网部署一个简单合约**
   - 使用 Remix IDE
   - 尝试调用合约函数

2. **体验一个 DeFi 协议**
   - 在测试网上尝试 Uniswap
   - 理解授权 (Approve) 机制

3. **设置一个独立的「热钱包」**
   - 用于日常小额交互
   - 与存储大额资产的钱包分开

---

## 进阶挑战

完成基础流程后，可以尝试：

### 挑战 1: 部署智能合约
```
使用 Remix IDE (remix.ethereum.org)
1. 编写一个简单的存储合约
2. 编译
3. 部署到 Sepolia
4. 调用函数读写数据
```

### 挑战 2: 使用 DeFi
```
在 Sepolia 上使用 Uniswap
1. 添加测试代币到钱包
2. 体验代币兑换流程
3. 理解「授权」(Approve) 步骤
```

### 挑战 3: 追踪一笔复杂交易
```
在 Etherscan 上找一笔 DeFi 交易
1. 理解内部交易 (Internal Transactions)
2. 看懂事件日志 (Event Logs)
3. 追踪资金流向
```

---

## 附录：常用资源

| 资源 | 链接 | 用途 |
|------|------|------|
| MetaMask | https://metamask.io | 钱包 |
| Sepolia Etherscan | https://sepolia.etherscan.io | 测试网浏览器 |
| Sepolia Faucet | https://sepoliafaucet.com | 获取测试币 |
| Remix IDE | https://remix.ethereum.org | 在线合约开发 |
| Ethereum.org | https://ethereum.org/learn | 官方学习资源 |

---

> **恭喜！** 你已经完成了 Web3 的第一笔链上交易。虽然是在测试网上，但整个流程和主网完全一致。现在你已经理解了钱包、交易、Gas、区块浏览器等核心概念。继续探索吧！
